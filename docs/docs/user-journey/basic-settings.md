---
sidebar_position: 2
---

# 유저 여정 기본 설정

## 여정 생성하기

노티플라이 콘솔 [유저 여정 생성하기] 메뉴에서 새로운 유저 여정을 만들 수 있습니다.

## 기본 정보 입력

- 제목: 여정을 식별할 수 있는 이름
- 설명: 여정의 목적이나 맥락을 간단히 기록

## 진입 조건

여정을 시작하는 **시점**과 **대상**, 그리고 진입 이후의 **재진입 가능 여부**와 **이탈 조건**을 설정합니다.

- **진입 시점**: 여정을 시작할 타이밍을 정의합니다.  
  예: 특정 시각마다 반복 실행, 특정 이벤트 발생 시 즉시 시작
- **진입 대상**: 여정에 들어올 수 있는 사용자 조건을 정의합니다.  
  예: 최근 7일 내 가입자, 특정 속성을 가진 사용자
- **재진입 조건**: 이미 여정에 참여한 사용자가 다시 진입할 수 있는지 여부를 정의합니다.  
  예: 종료 후 재진입 가능, 진행 중에도 재진입 가능, 재진입 불가
- **이탈 조건**: 여정 도중 특정 이벤트가 발생했을 때 여정을 중단할 조건을 정의합니다.  
  예: 이미 구매 완료한 사용자는 리마인드 메시지 발송 대상에서 제외

### 시점

- 특정 시간에 반복 실행 → **예약 진입**
- 이벤트 발생 시 실시간 실행 → **이벤트 기반 진입**
- API 호출 시 실행 → **API 기반 진입**

<div className="figure">
<figure>
  <img src="/img/journey-start.png" alt="진입 조건 예시" />
</figure>
<p>
  이벤트 기반 진입 예시 — '장바구니에 담기'
</p>
</div>

### 대상

- 조건을 만족하는 사용자만 진입 가능
- 속성 기반, 이벤트 기반 조건을 활용
- 조건은 진입 시점에만 검사되며, 이후 변경돼도 세션은 유지됨

<div className="figure">
<figure>
  <img src="/img/conditions.png" alt="진입 대상" />
</figure>
<p>
  진입 대상 화면
</p>
</div>

### 재진입 조건

사용자가 동일 여정에 재참여할 수 있는 규칙을 정의합니다.

| 조건 | 설명 |
|------|------|
| 재진입 불가 | 한 번 참여한 사용자는 다시 시작 불가 |
| 종료 후 재진입 가능 (기본) | 이탈/종료 후 조건 충족 시 재진입 가능 |
| 재진입 가능 | 진행 중 여부와 상관없이 재참여 가능 |

### 이탈 조건

여정 도중 특정 이벤트가 발생하면 더 이상 다음 노드로 진행하지 않도록 설정할 수 있습니다.

:::tip 예: “재구매 유도 여정”에서 사용자가 상품을 구매하면, 이후 메시지를 중단하고 이탈 처리
:::

## 전환 성과 설정

- 여정의 성과를 측정할 목표 이벤트(전환) 지정할 수 있습니다. (최대 3개)
- 각 메시지 노드의 전환도 동일 기준으로 설정할 수 있습니다.
- 세션별 최대 1회만 측정할 수 있습니다. (중복 제거)

자세한 전환 성과 측정 기준은 [유저 여정 통계 가이드](docs/docs/user-journey/statistics.md)를 참고해주세요.

## 유저 여정 상태

| 상태     | 새로운 세션 진입 | 진행 중 세션 실행         | 메시지 발송 | 통계 집계          | 노드/구조 수정 |
|----------|------------------|---------------------------|-------------|--------------------|----------------|
| **활성** | 가능             | 계속 진행                | 수행        | 집계됨             | 불가           |
| **일시중지** | 불가         | 중단 후 대기 (재활성화 시 재개) | 중단        | 집계 안 됨 (진행 없음) | 가능           |
| **비활성** | 불가           | 즉시 이탈 처리            | 중단        | 이탈로 집계        | 가능           |

- 활성: 여정이 정상 동작하는 상태입니다.
- 일시중지: 새로운 진입은 막고, 진행 중 세션을 현재 노드에서 멈춰 대기시킵니다. 다시 활성화하면 멈춘 지점부터 재개됩니다.
- 비활성: 운영 중단 상태입니다. 모든 진행 중 세션을 이탈 처리하며, 재개해도 기존 세션은 복구되지 않습니다.

## 유저 여정 성능

노티플라이 여정 엔진은 분당 최대 `200,000건`의 노드를 실행할 수 있습니다.

### 실행 지연 고려

트래픽이 몰릴 경우 노드 실행 간격이 1~5분 지연될 수 있습니다. 타이밍에 민감한 메시지는 충분히 여유를 두고 설계하는 것이 좋습니다.